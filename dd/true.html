<!doctype html>
<html lang="en" class="request">
<head>
    <meta charset="UTF-8">
    <title>后道工程（内部）</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<!--[if gte IE 8]><link rel="stylesheet" href="/engin/style/ie8.css" /><![endif]-->
<script src="/engin/script/lang-cn.js"></script>

<script>
	var ctx = '/engin';
	var orgctx = 'http://172.28.208.145/org';
	var attachctx = 'http://172.28.208.145/attach';
	var premctx = 'http://172.28.208.145/permission';
</script>

    <link rel="stylesheet" href="http://172.28.208.145/resource/style/request-form.css" />
</head>
<body>
	<div class="wrap">
		<form action="eng-dat!submitCreate.do" id="requrest-form" method="post">
        	
<input type="hidden" name="taskInfo.taskId" value="" />
<input type="hidden" name="taskInfo.processId" value="DATProcess" />
<input type="hidden" name="taskInfo.instanceId" value="" />
<input type="hidden" name="taskInfo.basicinfoId" value="" />
<input type="hidden" name="taskInfo.activityName" value="Create" />
<input type="hidden" name="taskInfo.activityDisplayname" value="Create" />
<input type="hidden" name="taskInfo.currentPersons" value="邵文怡,Sophia Shao(000955)" />
<input type="hidden" name="taskInfo.grantorEmpuid" value="000955" />
<input type="hidden" name="taskInfo.grantorDisplayname" value="邵文怡,Sophia Shao(000955)" />
<input type="hidden" name="taskInfo.approverEmpuid" value="000955" />
<input type="hidden" name="taskInfo.approverDispayname" value="邵文怡,Sophia Shao(000955)" />
<input type="hidden" name="taskInfo.isSubTask" value="" />
<input type="hidden" name="taskInfo.title" value="" />

<input type="hidden" id="submitType" name="taskInfo.submitType" />
<input type="hidden" id="submitDecision" name="taskInfo.decision"  />
<input type="hidden" name="formDTO.form.id" value="" />
<input type="hidden" name="formDTO.form.version" value="" />
<div class="req-hd">
    <table class="form-grid" >
        <tbody>
            <tr>
                <td colspan="2" rowspan="2"><div class="form-name"><h1>DAT</h1></div></td>
                <th><label>申请编号</label></th>
                <td></td>
            </tr>
            <tr>
                <th><label>申请时间</label></th>
                <td>2016-04-18</td>
            </tr>
            <tr class="row-subject">
                <th><label>主题</label></th>
                <td>
                	<label id="subject"></label>
                	<input type="hidden" name="formDTO.form.subject" value=""/>
                </td>
                <th><label>起草人</label></th>
                <td>邵文怡,Sophia Shao(000955)</td>
            </tr>
        </tbody>
    </table>
</div>
					
			<div class="validate-messages">
	            <h2 class="validate-messages-title">错误信息：</h2>
	            <a href="javascript:;" class="validate-messages-close"></a>
	            <ul class="validate-messages-list"></ul>
	        </div>
			
			<div class="req-wrap">
				
<ul class="tab-nav-list clear">
	<li class="item selected"><a href="javascript:;">申请栏</a></li>
	<li class="item "><a href="javascript:;">审批栏</a></li>
</ul>
				<div class="tab-cnt-list">
					<div>
						
<h3 class="fold-hd" >
    <a href="javascript:;" class="hd-icon-text">基本信息</a>
</h3>

<div class="fold-cnt">
    <table class=" form-grid ">
        <tbody>
            <tr class="placeholder">
                <th></th>
                <td></td>
                <th></th>
                <td></td>
            </tr>
            <tr>
                <th><label>申请人</label></th>
                <td>
               	 	邵文怡,Sophia Shao(000955)
                </td>
                <th><label>所属组织</label>
                <td>
                	FIEH/IT/EIM I/BPM
                </td>
            </tr>
            <tr>
                <th><label>工号</label></th>
                <td>
                	000955
                </td>
                <th><label>分机号码</label></th>
                <td>
                	81872/66126
                </td>
            </tr>
        </tbody>
    </table>
</div>
						











<input type="hidden" name="d-targetProcessCode-validate" />
<input type="hidden" name="d-composeProcessCode-validate" />
<input type="hidden" name="d-composeProcessEnd-validate" />
<input type="hidden" name="d-attachCSVInkFile-validate" />

<input type="hidden" name="activityName" value="Create">

<style type="text/css">
		.yzsq-guide ul{
			border:1px solid #eee;
		}
		.yzsq-guide ul li{
			padding:0 30px 10px;
			font-size: 20px;
			color:#fff;
			height: 60px;
			line-height: 70px;
			text-align: center;
			cursor: pointer;
			border: 1px solid #eee;
		}
		.yzsq-guide ul li:hover{
			font-size: 22px;
		}
		.yzsq-guide ul li label{
			cursor: pointer;
		}
		.yzsq-guide ul li[data-flag="CI"]{
			background-color: #6db9d8;
		}
		.yzsq-guide ul li[data-flag="PI"]{
			background-color: #79cd7d;
		}
		.yzsq-guide ul li[data-flag="OI"]{
			background-color: #e59090;
		}
		.list-grid th{
			line-height: 1.5em;
		}
	</style>

<h3 class="fold-hd">
	<a href="javascript:;" class="hd-icon-text">产品信息</a>
</h3>
<div class="fold-cnt">
	<table class="form-grid">
		<tbody>
			<tr class="placeholder">
				<th></th>
				<td></td>
				<th></th>
				<td></td>
			</tr>
			<tr>
				<th>
					<label class="require">基地品名</label>
				</th>
				<td>
					<input type="text" class="text"  onchange="basicNameBlur()" style="width:60%" data-name="basicName"  name="formDTO.form.basicName" value="">
					<div title="基地品名" class="text-icon-selector" style="height: 20px;width: 1px;display: inline-block" data-action-type="Ben-default@callbackBen"></div>
					<input type="hidden" name="formDTO.form.basicNameRemark" value="" />
				</td>
			</tr>
			<tr>
				<th>
					<label class="require">产品代码</label>
				</th>
				<td colspan="3">
					<textarea class="textarea"  name="formDTO.form.productCode"></textarea>
				</td>
			</tr>
			<tr>
				<th>
					<label class="require">Lot ID</label>
				</th>
				<td>
					<input type="text" name="formDTO.form.lotId" value="" maxlength="11" class="text">
				</td>
				<th>
					<label class="require">需求类型</label>
				</th>
				<td>
					<input type="hidden"  name="formDTO.form.demandType" value="" class="text">
					<span class="csv-ink" style="display:none;">CSV INK</span>
					<span class="project-ink" style="display:none;">工程间INK</span>
					<span class="other-data-processing" style="display:none;">其他数据处理</span>
				</td>
			</tr>
			<tr>
				<th>
					<label class="require">需求内容</label>
				</th>
				<td colspan="3">
					<textarea class="textarea" name="formDTO.form.demandContent"></textarea>
				</td>
			</tr>
			<tr>
				<th class="">
					<label class="">附件</label>
				</th>
				<td class="">
					
					









<div class="upload-multiple-file"
	data-add-url="http://172.28.208.145/attach/web/attachment/attach.do?request_locale=zh_CN&type=ATTACH_PRODUCT_FILE&exts=&processId=DATProcess"
	data-delete-url="http://172.28.208.145/attach/web/common/attachment!delete.do"
	data-download-url="http://172.28.208.145/attach/web/attachment/download/attach.do?id={id}">
	<a href="javascript:;" class="add-file">上传附件</a>
	<ul class="file-list">
		
		
	</ul>
	<input name="attachIds" type="hidden" value="" id="AttachmentATTACH_PRODUCT_FILE" >
</div>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<h3 class="fold-hd csv-ink">
	<a href="javascript:;" class="hd-icon-text">CSV INK（申请人）</a>
</h3>

<div class="fold-cnt csv-ink">
	<table class="form-grid">
		<tbody>
			<tr class="placeholder">
				<th></th>
				<td></td>
				<th></th>
				<td></td>
			</tr>
			<tr>
				<th>
					<label class="require">是否重做合成</label>
				</th>
				<td>
					<select name="formDTO.form.redo" id="" class="select">
						<option value=""></option>
						<option value="Y" data-show-hidden=".redo"         title="是">是</option>
						<option value="N" data-show-hidden=".attachment"    title="否">否</option>
					</select>
				</td>
				<th>
					<label class="require">Map合成模式选择</label>
				</th>
				<td>
					<select name="formDTO.form.selectMode" id="" class="select">
						<option value=""></option>
						<option value="新合成1次"  title="新合成1次">新合成1次</option>
						<option value="新合成2次"  title="新合成2次">新合成2次</option>
						<option value="加做合成"   title="加做合成">加做合成</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>
					<label class="require">CSV文件内待修正的SLOT和GPC一致，文件名无空格，Ink点未超出测试区域</label>
				</th>
				<td>
					<select name="formDTO.form.ndCorrect" id="" class="select">
						<option value=""></option>
						<option value="Y"    title="是">是</option>
						<option value="N"   title="否">否</option>
					</select> 
				</td>
				<th>
					<label class="require">已结束 本P/W测试 并且停在打点前</label>
				</th>
				<td>
					<select name="formDTO.form.pwBeforeEnd" id="" class="select">
						<option value=""></option>
						<option value="Y"  title="是">是</option>
						<option value="N"  title="否">否</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>
					<label class="require">对于本PW测试后分割出来的子lot，确认母lot没有做过ink，新做</label>
				</th>
				<td>
					<select name="formDTO.form.newInk" id="" class="select">
						<option value=""></option>
						<option value="Y"  title="是">是</option>
						<option value="N"  title="否">否</option>
					</select>
				</td>
			</tr>
			<tr>
				<th class="attachment">
					<label class="require">附件</label>
				</th>
				<td class="attachment">
					
					









<div class="upload-multiple-file"
	data-add-url="http://172.28.208.145/attach/web/attachment/attach.do?request_locale=zh_CN&type=ATTACH_CSVINK_FILE&exts=&processId=DATProcess"
	data-delete-url="http://172.28.208.145/attach/web/common/attachment!delete.do"
	data-download-url="http://172.28.208.145/attach/web/attachment/download/attach.do?id={id}">
	<a href="javascript:;" class="add-file">上传附件</a>
	<ul class="file-list">
		
		
	</ul>
	<input name="attachIds" type="hidden" value="" id="AttachmentATTACH_CSVINK_FILE" >
</div>
				</td>
			</tr>
			<tr>
				<th>
					<label>备注</label>
				</th>
				<td colspan="3">
					<textarea class="textarea" name="formDTO.form.requestCsvRemark"></textarea>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<h3 class="fold-hd project-ink">
	<a href="javascript:;" class="hd-icon-text">工程间INK（申请人）</a>
</h3>

<div class="fold-cnt project-ink">
	<table class="list-grid">
		<caption style="color:#fff;background-color:#3F7FBF;width:150px;border-radius:5px 5px 0 0;font-size:16px;padding:5px;text-align:center;">Process Code</caption>
		<thead>
			<tr>
				<th width="40px">
					
				</th>
				<th width="30px">
					NO
				</th>
				<th width="px">
					<label class="require">Target Process Code</label>
				</th>
				<th width="px">
					<label class="require">Compose Process Code</label>
				</th>
				<th width="px">
					<label class="require">Compose Process测试已结束且不再再工事</label>
				</th>
				<th width="30px">
					
				</th>
				<th width="30px">
					
				</th>
			</tr>
		</thead>
		<tbody class="repeat repeat-editMe" data-repeat-index="0">
			  
			
		</tbody>
	</table>
	<div class="repeat-add-row repeat-add-row-editMe">
		<a href="javascript:;" class="repeat-add" data-repeat="tmpl-repeat-editMe"></a>
	</div>

	<table class="form-grid">
		<tbody>
			<tr class="placeholder">
				<th></th>
				<td></td>
				<th></th>
				<td></td>
			</tr>
			<tr>
				<th class="">
					<label class="">附件</label>
				</th>
				<td class="">
					
					









<div class="upload-multiple-file"
	data-add-url="http://172.28.208.145/attach/web/attachment/attach.do?request_locale=zh_CN&type=ATTACH_INKREQ_FILE&exts=&processId=DATProcess"
	data-delete-url="http://172.28.208.145/attach/web/common/attachment!delete.do"
	data-download-url="http://172.28.208.145/attach/web/attachment/download/attach.do?id={id}">
	<a href="javascript:;" class="add-file">上传附件</a>
	<ul class="file-list">
		
		
	</ul>
	<input name="attachIds" type="hidden" value="" id="AttachmentATTACH_INKREQ_FILE" >
</div>
				</td>
			</tr>
			<tr>
				<th>
					<label>备注</label>
				</th>
				<td colspan="3">
					<textarea class="textarea" name="formDTO.form.requestEngineeringRemark"></textarea>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<h3 class="fold-hd other-data-processing">
	<a href="javascript:;" class="hd-icon-text">其他数据处理（申请人）</a>
</h3>

<div class="fold-cnt other-data-processing">
	<table class="form-grid">
		<tbody>
			<tr class="placeholder">
				<th></th>
				<td></td>
				<th></th>
				<td></td>
			</tr>
			<tr>
				<th class="">
					<label class="">附件</label>
				</th>
				<td class="">
					
					









<div class="upload-multiple-file"
	data-add-url="http://172.28.208.145/attach/web/attachment/attach.do?request_locale=zh_CN&type=ATTACH_OTHREQ_FILE&exts=&processId=DATProcess"
	data-delete-url="http://172.28.208.145/attach/web/common/attachment!delete.do"
	data-download-url="http://172.28.208.145/attach/web/attachment/download/attach.do?id={id}">
	<a href="javascript:;" class="add-file">上传附件</a>
	<ul class="file-list">
		
		
	</ul>
	<input name="attachIds" type="hidden" value="" id="AttachmentATTACH_OTHREQ_FILE" >
</div>
				</td>
			</tr>
			<tr>
				<th>
					<label>备注</label>
				</th>
				<td colspan="3">
					<textarea class="textarea" name="formDTO.form.otherRequestRemark"></textarea>
				</td>
			</tr>
		</tbody>
	</table>
</div>


<script id="tmpl-repeat-editMe" type="text/repeat">
	<code>
		<tr class="repeat-item" data-repeat-index="{#index#}">
			<td>
				
			</td>
			<td class="repeat-no">

			</td>
			<td>
				<input type="text" name="engDatInfoDetails[{#index#}].targetProcessCode"  class="text">
			</td>
			<td>
				<input type="text" name="engDatInfoDetails[{#index#}].composeProcessCode" class="text">
			</td>
			<td>
				<select name="engDatInfoDetails[{#index#}].composeProcessEnd" id="" class="select">
					<option value=""></option>
					<option value="Y"  title="是">是</option>
					<option value="N" title="否">否</option>
				</select>
			</td>
			<td>
				<a href="javascript:;" class="repeat-remove icon-delete-20"></a>
			</td>
			<td>
				
			</td>
		</tr>
	</code>
	var setting = 
	{
		repeat : '.repeat-editMe',
		min : 1,
		max : 50,
		init : 1,
		onMin : function(sender)
		{
			$.microTip(
			{
				message : '至少需要一行记录.'
			},sender);
		},
		onRemoveBefore : function($item,sender)
		{
			var _this = this;
			$.microConfirm(
			{
				message : '确定删除?',
				confrim : '确定',
				cancel : '取消',
				onConfirm : function()
				{
					_this.remove($item, sender);
				}
			}, sender);
		}
	};
</script>

<script type="text/dialog" id="yzsq-guide">
<div class="yzsq-guide">
    <ul>
        <li data-flag="CI">
            <label>CSV INK</label>
			<input type="hidden"  name="formDTO.form.demandType" value="" class="text">
        </li>
        <li data-flag="PI">
            <label>工程间INK</label>
			<input type="hidden"  name="formDTO.form.demandType" value="" class="text">
        </li>
        <li data-flag="OI">
            <label>其他数据处理</label>
			<input type="hidden"  name="formDTO.form.demandType" value="" class="text">
        </li>
    </ul>
</div>
</script>

                    
					</div>
					<div>
						<h3 class="fold-hd" >
						    <a href="javascript:;" class="hd-icon-text">审批操作</a>
						</h3>

	                   	<div class="fold-cnt audit-decision">
	                        <table class="form-grid form-grid-audit-info">
	                            <tr>
	                                <th><label>备注</label></th>
	                                <td><textarea class="textarea" name="taskInfo.comments"></textarea></td>
	                            </tr>
	                        </table>
	                       	








<table class="form-grid form-grid-audit-info">
    <tr>
        <th>
            <label class="person">当前审批人</label>
        </th>
        <td>
            邵文怡,Sophia Shao(000955)
        </td>
    </tr>
    <tr>
        <th>
            <label class="activity">当前状态</label>
        </th>
        <td>
            Create
        </td>
    </tr>
</table>

	                   	</div>
                   		







                   
<h3 class="fold-hd">
	<a href="javascript:;" class="hd-icon-text">历史审批记录</a>
</h3>
<div class="fold-cnt audit-history-list">
	<div style="left:auto; top:-20px; right:0px; position: absolute; display:none;">
		<a href="http://172.28.208.145/org/web/common/workspace/process-flow-img.do?instanceId=" target="_blank"><i class="icon-list-20"></i>查看流程图</a>
	</div>
	<div class="audit-history-list-switch d-n">
	    <a href="javascript:;" class="switch-list"><i class="icon-sort-20"></i>审批时间排序</a>
	    <a href="javascript:;" class="switch-dept"><i class="icon-list-20"></i>部门分类排序</a>
	</div>

	<table class="list-grid list-grid-audit-history list-grid-highlight list-grid-dept" >
		<thead>
		    <th width="200px">节点</th>
		    <th width="200px">姓名</th>
		    <th width="150px">动作</th>
		    <th width="140px">时间</th>
		    <th>备注</th>
		</thead>
		
	</table>

	<table class="list-grid list-grid-audit-history list-grid-highlight list-grid-sort" >
		<thead class="grid-hd">
		    <th width="200px">节点</th>
		    <th width="200px">姓名</th>
		    <th width="150px">动作</th>
		    <th width="140px">时间</th>
		    <th>备注</th>
		</thead>
		<tbody>
			
		</tbody>
	</table>
</div>  
					</div>
				</div>
			</div>
        	








<div class="req-oper">
    <ul class="req-oper-list">
        <li class="item item-submit active">
            <a href="javascript:;"></a>
            <div class="des">
                <p>提交</p>
            </div>
        </li>
        
        <li class="item item-close">
            <a href="javascript:;"></a>
            <div class="des">
                <p>关闭</p>
            </div>
        </li>
        <li class="item item-save">
            <a href="javascript:;"></a>
            <div class="des">
                <p>保存</p>
            </div>
        </li>
        <li class="item item-print">
            <a href="javascript:;"></a>
            <div class="des">
                <p>打印</p>
            </div>
        </li>
        <li class="item item-title">
        </li>
        <li class="item item-top">
            <a href="javascript:;"></a>
            <div class="des">
                <p>TOP</p>
            </div>
        </li>
    </ul>
</div>  

		</form>
	</div>
</body>

<script src="http://172.28.208.145/resource/script/request-config.js" ></script>
<script src="http://172.28.208.145/resource/script/require.js" data-main="http://172.28.208.145/resource/script/request-form.js"></script>
<script>
	function requireReady(form)
	{	
		var demandType=$("input[name='formDTO.form.demandType']").val();
		var rules = {}; 
		
		rules['formDTO.form.lotId']={validateLotIdRequired:true, groups:['submit']};
		rules['formDTO.form.basicName']={validateBasicNameRequired:true, groups:['submit']};
		rules['formDTO.form.productCode']={validateProductCodeRequired:true, groups:['submit']};
		if("CI" == demandType){
			//申请类型，需求内容,是否重做合成,合成模式，CSV文件内待修正的SLOT和GPC一致,文件名无空格
			rules['formDTO.form.demandType']={required:true, groups:['submit']};
			rules['formDTO.form.demandContent']={required:true, groups:['submit']};
			rules['formDTO.form.redo']={required:true, groups:['submit']};
			rules['formDTO.form.selectMode']={required:true, groups:['submit']};
			rules['formDTO.form.ndCorrect']={required:true, groups:['submit']};
			
//	 		已结束本P/W测试并且停在打点前；对于本PW测试后分割出来的子lot，确认母lot没有做过ink，新做；附件；
			rules['formDTO.form.pwBeforeEnd']={required:true, groups:['submit']};
			rules['formDTO.form.newInk']={required:true, groups:['submit']};
			rules['d-attachCSVInkFile-validate']={CSVInkFileRequired:true, groups:['submit']};
		}else if("PI" == demandType){
	// 		动态行
			rules['d-targetProcessCode-validate']  ={targetProcessRequired:true, groups:['submit']};
			rules['d-composeProcessCode-validate'] ={composeProcessCodeRequired:true, groups:['submit']};
			rules['d-composeProcessEnd-validate']  ={composeProcessEndRequired:true, groups:['submit']};
		}
		
        
	
	var messages = {};
		messages['audit-decision']               ={required:"审批决策必填"};
		messages['taskInfo.nextPartcipantsBean.moreApprovers']={required:'加签人员不能为空'};
		messages['taskInfo.nextPartcipantsBean.Appoint']      ={required:'转办人员不能为空'};
	  	messages['taskInfo.comments']            ={required:"备注必填"};
		
  	    messages['formDTO.form.lotId']           = {validateLotIdRequired:"Lot ID必须填写非中文，且长度大于等于9位小于等于11"};
  	    messages['formDTO.form.basicName']       = {validateBasicNameRequired:"基地品名不能为空,且非中文"};
  		messages['formDTO.form.productCode']     = {validateProductCodeRequired:"产品代码不能为空"};
  		
  		messages['formDTO.form.demandType']      ={required:"需求类型不能为空"};
  		messages['formDTO.form.demandContent']   ={required:"需求内容不能为空"};
  		messages['formDTO.form.redo']            = {required:"是否重做合成不能为空"};
  		messages['formDTO.form.selectMode']      = {required:"Map合成模式选择不能为空"};
  		messages['formDTO.form.ndCorrect']       = {required:"CSV文件内待修正的SLOT和GPC一致，文件名无空格，Ink点未超出测试区域不能为空"};
  		messages['formDTO.form.pwBeforeEnd']     = {required:"已结束本P/W测试并且停在打点前不能为空"};
  		messages['formDTO.form.newInk']      	 = {required:"对于本PW测试后分割出来的子lot，确认母lot没有做过ink，新做不能为空"};
 
 <!--创建；退回修改；申请人确认   		 -->
		messages['d-attachCSVInkFile-validate']  = {CSVInkFileRequired:"CSV INK(申请人)附件不能为空且只可上传后缀为csv的附件"};
  		
  	    messages['d-targetProcessCode-validate'] = {targetProcessRequired:"Target Process Code不能为空且非中文"};
  		messages['d-composeProcessCode-validate']= {composeProcessCodeRequired:"Compose Process Code不能为空且非中文"};
  		messages['d-composeProcessEnd-validate'] = {composeProcessEndRequired:"Compose Process测试已结束且不再再工事不能为空"};
  		
  		messages['formDTO.form.redoConfirm']     = {required:"重做模式：须确认MAPDATA恢复到合成前状态：变成WITS最高版本文件不能为空"};
  		messages['formDTO.form.lpsCorrect']      = {required:"CSV文件需要良品数修正的SLOT是否和GPC一致，文件名无空格不能为空"};
  		messages['formDTO.form.pwEndTest']       = {required:"制品是否本P/W已经测试终了不能为空"};
  		messages['formDTO.form.existenceOfJudgment']           = {required:"新做/加做模式：Wits上MAPDATA存在性判断不能为空"};
  		messages['formDTO.form.synthesisAgo']    = {required:"新做/加做模式：合成前MAPDATA文件内良品数必须与GPC一致不能为空"};
  		messages['formDTO.form.synthesisEngineering']          = {required:"CSVMASK Recipe（合成工程/CSV文件名）不能为空"};
  		messages['formDTO.form.synthesisDate']   = {required:"合成以后是否生成当前时间的MAPDATA不能为空"};
  		messages['formDTO.form.isConfirmReportSm']             = {required:"合成后新MAPDATA文件内首枚良品数与GPC一致、存在合成标记不能为空"};
  		messages['formDTO.form.isConfirmReportEngineering']    = {required:"当前节点GPC上完成良品数修正报告确认OK不能为空"};
  		messages['formDTO.form.lotidUndivided']  = {required:"GPC上在良品数修正时lot未做分割（Y/N）不能为空"};
  		
  		messages['formDTO.form.targetProcessCode']  = {required:"Wits上MAPDATA 【Target Process Code】存在性判断不能为空"};
  		messages['formDTO.form.composeProcessCode']  = {required:"Wits上MAPDATA 【Compose Process Code】存在性判断不能为空"};
  		messages['formDTO.form.composeProcess']  = {required:"合成前MAPDATA【Compose Process】文件内良品数必须与GPC一致不能为空"};
  		messages['formDTO.form.isGenerationTime']  = {required:"合成以后是否生成当前时间的MAPDATA不能为空"};
  		messages['formDTO.form.existMark']  = {required:"合成后新MAPDATA文件内良品数与GPC一致、存在合成标记不能为空"};
  		messages['formDTO.form.isConfirmReportLps']  = {required:"当前节点GPC上完成良品数修正报告确认OK不能为空"};
  		
  		messages['formDTO.form.dataBackup']  = {required:"数据备份不能为空"};
  		
  		messages['formDTO.form.meetsRequirements']  = {mrRequired:"确认处理后数据是否符合要求不能为空"};
  		
  		$.validator.addMethod("mrRequired",function(){
		    var flag = true;
		    var mr=$("[name='formDTO.form.meetsRequirements']:checked").val()
			if(mr != 'Y' && mr != 'N'){
				flag = false;
				return;
			}
		    return flag;
		},''); 
  		
<!------------------ 		动态行Star	 ------------------->
		$.validator.addMethod("targetProcessRequired",function(){
		    var flag = true;
		   $(".repeat-editMe input[name$='.targetProcessCode']").each(function(){
		  	    var targetProcessCode =$(this).val();
				var reg=checkAscii(targetProcessCode);
				if(targetProcessCode == '' || !reg){
					flag = false;
					return;
				}
		   })
		    return flag;
		},''); 
		
		$.validator.addMethod("composeProcessCodeRequired",function(){
		    var flag = true;
		   $(".repeat-editMe input[name$='.composeProcessCode']").each(function(){
		  	    var composeProcessCode =$(this).val();
				var reg=checkAscii(composeProcessCode);
				if(composeProcessCode == '' || !reg){
					flag = false;
					return;
				}
		   })
		    return flag;
		},''); 
		
		$.validator.addMethod("composeProcessEndRequired",function(){
		    var flag = true;
		   $(".repeat-editMe select[name$='.composeProcessEnd'] option:selected").each(function(){
		  	    var composeProcessEnd =$(this).val();
				if(composeProcessEnd == '' ){
					flag = false;
					return;
				}
		   })
		    return flag;
		},''); 

<!------------------ 		动态End    	 ------------------->
				
				
<!--   		必须填写非中文，且长度大于等于9位小于等于11 -->
  		$.validator.addMethod("validateLotIdRequired",function(){
		    var flag = true;
		    var lotId=$("input[name='formDTO.form.lotId']").val();
			var reg=checkAscii(lotId);
			if(9 > lotId.length || !reg){
				flag = false;
				return;
			}
		    return flag;
		},''); 
		
		
<!-- 		非空；非中文 -->
		$.validator.addMethod("validateBasicNameRequired",function(){
		    var flag = true;
		     var basicName=$("input[name='formDTO.form.basicName']").val();
			 var reg=checkAscii(basicName);
			  if(basicName == ''  || !reg ){
					flag = false;
					return;
				}
		    return flag;
		},''); 
		
		function checkAscii(data){
			var flag = true;	
			$.each(data.split(''), function(index, value){
				var code = value.charCodeAt(); 
				if(+code > 127 || +code<0 || +code == 32) {
					flag = false;
					return;
				}
			});	
			return flag;
		}

		
  		$.validator.addMethod("validateProductCodeRequired",function(){
		    var flag = true;
		    var productCode=$("[name='formDTO.form.productCode']").val();
			if(productCode == ""){
				flag = false;
				return;
			}
		    return flag;
		},'');
	  	
<!-- 	  	是否重做合成="N" -->
<!-- 		或 -->
<!-- 		（是否重做合成="Y"且当前节点="申请人确认"）     只可上传后缀为csv的附件-->
	  	$.validator.addMethod('CSVInkFileRequired', function(value, element, param){
			var flag = true;
			var redoInput = $("input[name='formDTO.form.redo']").val();
			var redoSelect= $("select[name='formDTO.form.redo'] option:selected").val();
			var activityName=$("[name='activityName']").val();
			var objectArray = new Array();　//创建一个数组
			var objectArray=$("#AttachmentATTACH_CSVINK_FILE").val();
			var csvFileId=objectArray.split(",");
			
			if(activityName == 'ENG_DATRequesterConfirm'){
				if(redoInput == 'Y' && "" != objectArray){
					for(var i=0;i < csvFileId.length;i++){
						if(csvFileId[i] != ""){
							fileName=$("li[data-file-id="+ csvFileId[i] +"]").children("a:last").html();
							var index=fileName.lastIndexOf(".");
							var fileType=fileName.substr(index+1); 
							if(fileType.toLowerCase() != "csv"){
								flag = false;
								return ;
							}
						}else{
							flag = false;
							return ;
						}
					}
				}else if(redoInput == 'Y' && "" == objectArray){
					flag = false;
					return ;
				}
			}else{
				if(redoSelect == 'N' && "" != objectArray){
					for(var i=0;i < csvFileId.length;i++){
						if(csvFileId[i] != ""){
							fileName=$("li[data-file-id="+ csvFileId[i] +"]").children("a:last").html();
							var index=fileName.lastIndexOf(".");
							var fileType=fileName.substr(index+1); 
							if(fileType.toLowerCase() != "csv"){
								flag = false;
								return ;
							}
						}else{
							flag = false;
							return ;
						}
					}
				}else if(redoSelect == 'N' && "" == objectArray){
					flag = false;
					return ;
				}
			}
			return flag;
			
		});
  	
  	
	    form.setValidate('#requrest-form', rules, messages);
	    form.submitValidateBefore = function(data)
	    {
	    	$("#submitDecision").val("创建(Create)");
	    };

	    form.saveValidateBefore = function(data)
	    {
		    
	    };
	   
		if(demandType == ""){
				//弹出向导
		        var createGuideDialog = $.dialog('open',
		        {
		            name : 'create-guide',
		            title : '选择需求类型：',
		            html : $('#yzsq-guide').html(),
		            width : 240,
		            height : 210,
		            frameScrolling : 'no'
		        });
				
		        //隐藏弹出框标题块
		        $(".ui-widget-header").hide();
			
		        //打开
		        createGuideDialog.dialog('open');
		        $(".CI, .PI, .OI").hide();
		        $(".yzsq-guide").tip("请选择需求类型！");
		        $(document).delegate(".yzsq-guide ul li","click",function(){
		        	createGuideDialog.dialog('close');
		        	$("."+$(this).attr("data-flag")).show();
		        	if($(this).attr("data-flag") === "CI"){
				    	$('.csv-ink').show();
				    	$('.project-ink,.other-data-processing').hide();
				    	$('input[name="formDTO.form.demandType"]').val("CI");
				    }else if($(this).attr("data-flag") === "PI"){
				    	$('.project-ink').show();
				    	$('.csv-ink,.other-data-processing').hide();
				    	$('input[name="formDTO.form.demandType"]').val("PI");
				    }else if($(this).attr("data-flag") === "OI"){
				    	$('.other-data-processing').show();
				    	$('.csv-ink,.project-ink').hide();
				    	$('input[name="formDTO.form.demandType"]').val("OI");
				    }
		        });
		}else{
			if( demandType === "CI"){
		    	$('.csv-ink').show();
		    	$('.project-ink,.other-data-processing').hide();
		    }else if(demandType === "PI"){
		    	$('.project-ink').show();
		    	$('.csv-ink,.other-data-processing').hide();
		    }else if(demandType === "OI"){
		    	$('.other-data-processing').show();
		    	$('.csv-ink,.project-ink').hide();
		    }
		}
	};

</script>


<script type="text/javascript">
function basicNameBlur(){
	$("input[name='formDTO.form.basicNameRemark']").val("Y"); //可编辑
	$("[name='formDTO.form.productCode']").prop("disabled", false);
}

function callbackBen(args, actionType, items){
		//选择弹出框中的值
		if(items != null && items.length >0 ){
			$("input[name='formDTO.form.basicName']").val(items[0]['basicName']);
	     	$("[name='formDTO.form.productCode']").val(items[0]['productCode']);
	     	$("input[name='formDTO.form.basicNameRemark']").val("N"); //只读
		}else{//未选择弹出框，手动输入：产品编码可以手动输入
			$("input[name='formDTO.form.basicNameRemark'").val("N"); //只读
		}
	 	var isEditMark = $("input[name='formDTO.form.basicNameRemark']").val();
		if(isEditMark == 'Y'){
			$("[name='formDTO.form.productCode']").prop("disabled", false);
		}else{
			$("[name='formDTO.form.productCode']").prop("disabled", true);
		}
}


var _selectorTypeCustom = 
{
	
	'Ben':
	{
		ctx : window['ctx'],
		url : '/web/common/eng-in-select!selectBen.do',
		isMultiple : false,
		size : 
		{
			width : 1200,
			height : 606
		}
	},
	
	'EIMOrganization':
	{
		ctx : window['ctx'],
		url : '/web/common/eng-in-select!selectOrg.do',
		isMultiple : true,
		size : 
		{
			width : 702,
			height : 630
		}
	},
	
	'EngInMOrganization':
	{
		ctx : window['ctx'],
		url : '/web/common/eng-in-select!selectOrgs.do',
		isMultiple : true,
		size : 
		{
			width : 702,
			height : 630
		}
	}
}
</script>

</html>
